ensure no-nans for 0-length segments
    easiest to make a second pass through the data?
    also try going backwards in your test case

stroke-linejoin
    miter
    round
    bevel
